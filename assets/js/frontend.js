jQuery(document).ready(function ($) {
  const app = $("#community-ai-app");
  if (app.length === 0) return;

  function loadPosts(args = {}) {
    app.html(
      '<div class="cai-loading-spinner"><div></div><div></div><div></div><div></div></div><p>Loading Posts...</p>'
    );

    // This is a placeholder for a REST API call
    // In a real scenario, you would fetch data from the REST API created in class-rest-api.php
    setTimeout(() => {
      const mockPosts = `
                <div class="cai-post-card">
                    <div class="cai-post-votes">
                        <button>&#9650;</button>
                        <span>123</span>
                        <button>&#9660;</button>
                    </div>
                    <div class="cai-post-content">
                        <div class="cai-post-meta">
                            <span class="cai-community" style="--community-color: #8b5cf6;">c/ai-tech</span>
                            <span>Posted by u/demo_user 2 hours ago</span>
                        </div>
                        <h3>This is a sample post title from the AI</h3>
                        <p>This is the content of the post. It would contain the discussion topic generated by the artificial intelligence based on the source RSS feeds...</p>
                        <div class="cai-post-actions">
                            <span>3 Comments</span>
                            <span>Share</span>
                        </div>
                    </div>
                </div>
                <div class="cai-post-card">
                     <div class="cai-post-votes">
                        <button>&#9650;</button>
                        <span>98</span>
                        <button>&#9660;</button>
                    </div>
                    <div class="cai-post-content">
                        <div class="cai-post-meta">
                            <span class="cai-community" style="--community-color: #3b82f6;">c/general</span>
                            <span>Posted by u/another_user 5 hours ago</span>
                        </div>
                        <h3>Another interesting discussion topic</h3>
                        <p>More content goes here, engaging the community and sparking conversation.</p>
                         <div class="cai-post-actions">
                            <span>12 Comments</span>
                            <span>Share</span>
                        </div>
                    </div>
                </div>
            `;
      app.html(mockPosts);
    }, 1500);
  }

  loadPosts();
});
